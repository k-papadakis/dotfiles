# ENVIRONMENT VARIABLES
export XDG_CONFIG_HOME="${HOME}/.config"
export HOMEBREW_BUNDLE_FILE="${HOME}/.config/homebrew/Brewfile"
export STARSHIP_CONFIG="${HOME}/.config/starship/starship.toml"
PATH="${PATH}:${HOME}/.local/bin"
# Use bat for man pages
export MANPAGER="sh -c 'col -bx | bat --language=man --style=plain'"
# Prevent Podman from using the OCI format
export BUILDAH_FORMAT=docker
# Default Editor
if [[ -n ${SSH_CONNECTION} ]]; then
  export VISUAL=vim
else
  export VISUAL=nvim
fi
export EDITOR="${VISUAL}"
export PATH
export LESS="-i"

# KEYBINDINGS
# Because, $EDITOR contains "vi", zsh automatically sets `bindkey -v`
# Revert it back to emacs keybindings.
bindkey -e
# ^X^E to open the current command line in $EDITOR, like in bash.
autoload -Uz edit-command-line
zle -N edit-command-line
bindkey "^X^E" edit-command-line

# AUTOCOMPLETIONS
unsetopt LIST_BEEP
setopt CORRECT
zstyle ':completion:*' menu select
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' use-cache on

fpath+=${HOMEBREW_PREFIX}/share/zsh/site-functions
fpath+=~/.zfunc
autoload -Uz compinit && compinit
autoload -Uz bashcompinit && bashcompinit

complete -o nospace -C terraform terraform
source ${HOMEBREW_PREFIX}/etc/bash_completion.d/az

# PROGRAMS SETUP
eval "$(starship init zsh)"
eval "$(gh copilot alias -- zsh)"
eval "$(direnv hook zsh)"
eval "$(zoxide init zsh)"

source "${HOME}/.zsh/fzf/themes/catppuccin-frappe.zsh"
source <(fzf --zsh)
source "${HOME}/.zsh/zsh-syntax-highlighting/themes/catppuccin-frappe.zsh"
source ${HOMEBREW_PREFIX}/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ${HOMEBREW_PREFIX}/share/zsh-autosuggestions/zsh-autosuggestions.zsh

# ALIASES
alias docker="podman"
alias cd="z"
alias ls="eza --color=auto --icons=auto"
alias tree="eza --tree --color=auto --icons=auto"
alias ll="eza --long --color=auto --icons=auto --git"
alias la="eza --long --all --color=auto --icons=auto --git"
alias lzg="lazygit"
alias lzd="lazydocker"
alias batman="bat --language=man --style=plain --paging=always"
